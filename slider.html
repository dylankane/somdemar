<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Special Dishes Carousel</title>
  <!-- Google Fonts for Anton -->
  <link href="https://fonts.googleapis.com/css?family=Anton&display=swap" rel="stylesheet">
  <!-- Font Awesome 6 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    /* Reset and Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      height: 100%;
      font-family: Arial, sans-serif;
      background: #f8f8f8;
      color: #333;
    }
    
    /* Dish Cards Carousel Styles */
    .dish-cards-section {
      max-width: 1400px;
      margin: 4rem auto;
      padding: 0 2rem;
    }
    
    .cards-carousel {
      position: relative;
    }
    
    .cards-container {
      position: relative;
      width: 100vw;
      height: 80vh;
      min-height: 600px;
      overflow: hidden;
      margin-left: calc(-50vw + 50%);
    }
    
    .cards-track {
      display: flex;
      height: 100%;
      transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      will-change: transform;
      padding-left: 15vw; /* Center the middle card initially */
    }
    
    .dish-card {
      flex: 0 0 60vw; /* Each card takes 60% of viewport width */
      height: 90%;
      margin: auto 3vw;
      background:#f8f8f8;
      /* box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15); */
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: transform 0.3s ease;
    }
    
    .dish-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
    }
    
    /* Card Media Section */
    .card-media {
      flex: 1;
      position: relative;
      overflow: hidden;
    }
    
    .media-carousel {
      width: 100%;
      height: 100%;
      position: relative;
    }
    
    .media-slides {
      width: 100%;
      height: 100%;
      position: relative;
    }
    
    .media-slide {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    
    .media-slide.active {
      opacity: 1;
    }
    
    .media-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    
    .media-video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    
    /* Media Dots */
    .media-dots {
      position: absolute;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      z-index: 10;
    }
    
    .media-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .media-dot.active {
      background: white;
      transform: scale(1.2);
    }
    
    /* Card Content */
    .card-content {
      padding: 2rem;
      background: white;
    }
    
    .dish-title {
      font-family: 'Anton', Arial, sans-serif;
      font-size: 1.8rem;
      color: #333;
      margin-bottom: 1rem;
      letter-spacing: 1px;
    }
    
    .dish-description {
      font-size: 1rem;
      line-height: 1.6;
      color: #666;
      margin-bottom: 1.5rem;
    }
    
    .dish-price {
      font-size: 1.4rem;
      font-weight: bold;
      color: #e74c3c;
      text-align: right;
    }
    
    /* Navigation */
    .cards-navigation {
      display: flex;
      justify-content: center;
      gap: 3rem;
      margin-top: 3rem;
      padding: 2rem;
    }
    
    .nav-arrow {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      background: transparent;
      border: 2px solid #333;
      padding: 1rem 2rem;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
      color: #333;
      font-size: 1rem;
    }
    
    .nav-arrow:hover {
      background: #333;
      color: white;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .nav-arrow:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    .nav-arrow i {
      font-size: 1.1rem;
    }
    
    /* Page Header */
    .page-header {
      text-align: center;
      padding: 2rem 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      margin-bottom: 2rem;
    }
    
    .page-header h1 {
      font-family: 'Anton', Arial, sans-serif;
      font-size: 3rem;
      letter-spacing: 2px;
      margin-bottom: 0.5rem;
    }
    
    .page-header p {
      font-size: 1.2rem;
      opacity: 0.9;
    }
    
    /* Desktop peek effect */
    @media (min-width: 769px) {
      .carousel-track {
        padding-left: 10vw; /* Center the first slide */
      }
      
      .carousel-slide-item:last-child {
        margin-right: 10vw; /* Add space after last slide */
      }
    }
    
    /* Mobile Styles */
    @media (max-width: 768px) {
      .dish-cards-section {
        padding: 0 1rem;
        margin: 2rem auto;
      }
      
      .cards-container {
        height: 70vh;
        min-height: 500px;
        touch-action: pan-x;
      }
      
      .cards-track {
        padding-left: 10vw;
        cursor: grab;
      }
      
      .cards-track:active {
        cursor: grabbing;
      }
      
      .dish-card {
        flex: 0 0 80vw;
        margin: auto 2vw;
      }
      
      .card-content {
        padding: 1.5rem;
      }
      
      .dish-title {
        font-size: 1.5rem;
      }
      
      .dish-description {
        font-size: 0.9rem;
      }
      
      .dish-price {
        font-size: 1.2rem;
      }
      
      .cards-navigation {
        display: none; /* Hide navigation on mobile - use swipe */
      }
      
      .page-header h1 {
        font-size: 2rem;
      }
      
      .page-header p {
        font-size: 1rem;
      }
    }
    
    @media (max-width: 480px) {
      .cards-container {
        height: 60vh;
        min-height: 400px;
      }
      
      .dish-card {
        flex: 0 0 90vw;
      }
      
      .dish-title {
        font-size: 1.3rem;
      }
      
      .page-header {
        padding: 1.5rem 0;
      }
    }

  </style>
</head>
<body>
  <!-- Page Header -->
  <header class="page-header">
    <h1>Special Dishes Carousel</h1>
    <p>Interactive showcase of our finest culinary creations</p>
  </header>

  <!-- Dish Cards Carousel Section -->
  <section class="dish-cards-section">
    <div class="cards-carousel">
      <div class="cards-container">
        <div class="cards-track" id="dishCardsTrack">
          
          <!-- Card 1: Gambas a la Plancha -->
          <div class="dish-card" data-dish="gambas">
            <div class="card-media">
              <div class="media-carousel" id="mediaCarousel1">
                <div class="media-slides">
                  <div class="media-slide active">
                    <img src="assets/images/vieiras.png" alt="Gambas a la Plancha" class="media-image">
                  </div>
                  <div class="media-slide">
                    <video class="media-video" muted loop>
                      <source src="assets/videos/food-video.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                </div>
                <div class="media-dots">
                  <span class="media-dot active" data-slide="0"></span>
                  <span class="media-dot" data-slide="1"></span>
                </div>
              </div>
            </div>
            <div class="card-content">
              <h3 class="dish-title">Gambas a la Plancha</h3>
              <p class="dish-description">Fresh prawns grilled to perfection with garlic, olive oil, and a hint of chili. Served with lemon and crusty bread.</p>
              <div class="dish-price">€18.50</div>
            </div>
          </div>
          
          <!-- Card 2: Paella Valenciana -->
          <div class="dish-card" data-dish="paella">
            <div class="card-media">
              <div class="media-carousel" id="mediaCarousel2">
                <div class="media-slides">
                  <div class="media-slide active">
                    <img src="assets/images/vieiras.png" alt="Paella Valenciana" class="media-image">
                  </div>
                  <div class="media-slide">
                    <video class="media-video" muted loop>
                      <source src="assets/videos/food-video.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                </div>
                <div class="media-dots">
                  <span class="media-dot active" data-slide="0"></span>
                  <span class="media-dot" data-slide="1"></span>
                </div>
              </div>
            </div>
            <div class="card-content">
              <h3 class="dish-title">Paella Valenciana</h3>
              <p class="dish-description">Traditional Spanish rice dish with saffron, chicken, rabbit, beans, and vegetables. Cooked in our authentic paellera.</p>
              <div class="dish-price">€24.00</div>
            </div>
          </div>
          
          <!-- Card 3: Pulpo a la Gallega (Center/Start) -->
          <div class="dish-card" data-dish="pulpo">
            <div class="card-media">
              <div class="media-carousel" id="mediaCarousel3">
                <div class="media-slides">
                  <div class="media-slide active">
                    <img src="assets/images/vieiras.png" alt="Pulpo a la Gallega" class="media-image">
                  </div>
                  <div class="media-slide">
                    <video class="media-video" muted loop>
                      <source src="assets/videos/food-video.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                </div>
                <div class="media-dots">
                  <span class="media-dot active" data-slide="0"></span>
                  <span class="media-dot" data-slide="1"></span>
                </div>
              </div>
            </div>
            <div class="card-content">
              <h3 class="dish-title">Pulpo a la Gallega</h3>
              <p class="dish-description">Tender octopus served on wooden plates with boiled potatoes, paprika, and extra virgin olive oil. A Galician classic.</p>
              <div class="dish-price">€22.00</div>
            </div>
          </div>
          
          <!-- Card 4: Jamón Ibérico -->
          <div class="dish-card" data-dish="jamon">
            <div class="card-media">
              <div class="media-carousel" id="mediaCarousel4">
                <div class="media-slides">
                  <div class="media-slide active">
                    <img src="assets/images/vieiras.png" alt="Jamón Ibérico" class="media-image">
                  </div>
                  <div class="media-slide">
                    <video class="media-video" muted loop>
                      <source src="assets/videos/food-video.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                </div>
                <div class="media-dots">
                  <span class="media-dot active" data-slide="0"></span>
                  <span class="media-dot" data-slide="1"></span>
                </div>
              </div>
            </div>
            <div class="card-content">
              <h3 class="dish-title">Jamón Ibérico</h3>
              <p class="dish-description">Premium acorn-fed Iberian ham, aged for 36 months. Served with Manchego cheese and quince paste.</p>
              <div class="dish-price">€28.00</div>
            </div>
          </div>
          
          <!-- Card 5: Crema Catalana -->
          <div class="dish-card" data-dish="crema">
            <div class="card-media">
              <div class="media-carousel" id="mediaCarousel5">
                <div class="media-slides">
                  <div class="media-slide active">
                    <img src="assets/images/vieiras.png" alt="Crema Catalana" class="media-image">
                  </div>
                  <div class="media-slide">
                    <video class="media-video" muted loop>
                      <source src="assets/videos/food-video.mp4" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  </div>
                </div>
                <div class="media-dots">
                  <span class="media-dot active" data-slide="0"></span>
                  <span class="media-dot" data-slide="1"></span>
                </div>
              </div>
            </div>
            <div class="card-content">
              <h3 class="dish-title">Crema Catalana</h3>
              <p class="dish-description">Traditional Catalan dessert with vanilla custard and caramelized sugar crust. Flavored with cinnamon and lemon zest.</p>
              <div class="dish-price">€8.50</div>
            </div>
          </div>
          
        </div>
      </div>
      
      <!-- Navigation Arrows -->
      <div class="cards-navigation">
        <button class="nav-arrow nav-arrow-prev" id="prevCardBtn">
          <i class="fas fa-chevron-left"></i>
          <span>Previous</span>
        </button>
        <button class="nav-arrow nav-arrow-next" id="nextCardBtn">
          <span>Next</span>
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </section>

  <script>
    function initDishCardsCarousel() {
      const track = document.getElementById('dishCardsTrack');
      const cards = track.querySelectorAll('.dish-card');
      const prevBtn = document.getElementById('prevCardBtn');
      const nextBtn = document.getElementById('nextCardBtn');
      
      const totalCards = cards.length;
      let currentIndex = 2; // Start at middle card (index 2 = 3rd card)
      let isTransitioning = false;
      
      // Touch/swipe variables
      let startX = 0;
      let currentX = 0;
      let isDragging = false;
      let startTransform = 0;
      
      function getCardWidth() {
        if (window.innerWidth <= 480) return 92; // 90vw + 2vw margin
        if (window.innerWidth <= 768) return 82; // 80vw + 2vw margin
        return 63; // 60vw + 3vw margin
      }
      
      function updateCardPosition() {
        if (isTransitioning) return;
        
        const cardWidth = getCardWidth();
        const translateX = -(currentIndex * cardWidth);
        track.style.transform = `translateX(${translateX}vw)`;
        
        // Update button states
        updateNavigationButtons();
      }
      
      function updateNavigationButtons() {
        if (prevBtn) {
          prevBtn.disabled = currentIndex <= 0;
        }
        if (nextBtn) {
          nextBtn.disabled = currentIndex >= totalCards - 1;
        }
      }
      
      function nextCard() {
        if (isTransitioning || currentIndex >= totalCards - 1) return;
        
        isTransitioning = true;
        currentIndex++;
        updateCardPosition();
        
        setTimeout(() => {
          isTransitioning = false;
        }, 800);
      }
      
      function prevCard() {
        if (isTransitioning || currentIndex <= 0) return;
        
        isTransitioning = true;
        currentIndex--;
        updateCardPosition();
        
        setTimeout(() => {
          isTransitioning = false;
        }, 800);
      }
      
      // Navigation button controls
      if (prevBtn) prevBtn.addEventListener('click', prevCard);
      if (nextBtn) nextBtn.addEventListener('click', nextCard);
      
      // Touch/swipe functionality for mobile
      function handleTouchStart(e) {
        if (window.innerWidth > 768) return;
        
        startX = e.touches[0].clientX;
        isDragging = true;
        const cardWidth = getCardWidth();
        startTransform = -(currentIndex * cardWidth);
        track.style.transition = 'none';
      }
      
      function handleTouchMove(e) {
        if (!isDragging || window.innerWidth > 768) return;
        
        e.preventDefault();
        currentX = e.touches[0].clientX;
        const diffX = currentX - startX;
        const moveVw = (diffX / window.innerWidth) * 100;
        const newTransform = startTransform + moveVw;
        
        track.style.transform = `translateX(${newTransform}vw)`;
      }
      
      function handleTouchEnd(e) {
        if (!isDragging || window.innerWidth > 768) return;
        
        isDragging = false;
        track.style.transition = 'transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
        
        const diffX = currentX - startX;
        const threshold = window.innerWidth * 0.2;
        
        if (Math.abs(diffX) > threshold) {
          if (diffX > 0 && currentIndex > 0) {
            prevCard();
          } else if (diffX < 0 && currentIndex < totalCards - 1) {
            nextCard();
          } else {
            updateCardPosition();
          }
        } else {
          updateCardPosition();
        }
      }
      
      // Touch event listeners
      track.addEventListener('touchstart', handleTouchStart, { passive: false });
      track.addEventListener('touchmove', handleTouchMove, { passive: false });
      track.addEventListener('touchend', handleTouchEnd);
      
      // Keyboard navigation
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') {
          prevCard();
        } else if (e.key === 'ArrowRight') {
          nextCard();
        }
      });
      
      // Initialize
      updateCardPosition();
      
      // Handle window resize
      window.addEventListener('resize', () => {
        updateCardPosition();
      });
    }
    
    // Media carousel functionality for each card
    function initMediaCarousels() {
      const mediaCarousels = document.querySelectorAll('.media-carousel');
      
      mediaCarousels.forEach((carousel, carouselIndex) => {
        const slides = carousel.querySelectorAll('.media-slide');
        const dots = carousel.querySelectorAll('.media-dot');
        let currentSlide = 0;
        
        function showSlide(index) {
          // Hide all slides
          slides.forEach(slide => slide.classList.remove('active'));
          dots.forEach(dot => dot.classList.remove('active'));
          
          // Show current slide
          slides[index].classList.add('active');
          dots[index].classList.add('active');
          
          // Handle video playback
          slides.forEach((slide, slideIndex) => {
            const video = slide.querySelector('.media-video');
            if (video) {
              if (slideIndex === index) {
                video.play().catch(e => console.log('Video autoplay prevented'));
              } else {
                video.pause();
              }
            }
          });
        }
        
        // Dot click handlers
        dots.forEach((dot, index) => {
          dot.addEventListener('click', () => {
            currentSlide = index;
            showSlide(currentSlide);
          });
        });
        
        // Auto-cycle between image and video every 4 seconds
        setInterval(() => {
          currentSlide = (currentSlide + 1) % slides.length;
          showSlide(currentSlide);
        }, 4000);
      });
    }
    
    // Initialize everything when DOM is loaded
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        initDishCardsCarousel();
        initMediaCarousels();
      });
    } else {
      initDishCardsCarousel();
      initMediaCarousels();
    }
  </script>
</body>
</html>